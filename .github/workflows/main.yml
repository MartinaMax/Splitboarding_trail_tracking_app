name: Node.js CI/CD

on: 
  push:
    branches: [main]

jobs:

  test:

    name: Test
    runs-on: ubuntu-latest

      strategy: 
        matrix:
          node-version: [14.x]

      steps: 
        - name: Checkout
          uses: actions/checkout@v2
          with: 
            fetch-depth: 0
        
        - name: Use Node.js ${{ matrix.node-version }}
          uses: actions/setup-node@v2
          with: 
            node-version: ${{ matrix.node-version }}

        - name: NPM install, bulid and test
          run: |
            npm install
            npm test
          env:
            DBHOST: ${{ secret.DBHOST }}
            TOKEN_SECRET: ${{ secret.TOKEN_SECRET }}
            JWT_EXPIRES_IN: ${{ secret.JWT_EXPIRES_IN }}
        

        